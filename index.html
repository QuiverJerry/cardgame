<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>宝可梦璀璨宝石: 移动优化版</title>
    
    <!-- CSS模块 -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/card.css">
    <link rel="stylesheet" href="css/components.css">
</head>
<body>
    <!-- 登录界面 -->
    <div id="loginScreen">
        <div class="login-box">
            <h2 style="color:#2a5298; margin-bottom: 10px;">💎 宝可梦璀璨宝石</h2>
            <input type="text" id="serverUrl" value="ws://localhost:8001">
            <input type="text" id="roomId" placeholder="房间号" value="101">
            <input type="text" id="userId" placeholder="名字" value="小智">
            <button id="joinGameBtn">进入赛场</button>
        </div>
    </div>

    <!-- 游戏界面 -->
    <div id="gameScreen">
        <!-- 顶部栏 -->
        <div class="top-bar">
            <div id="roomDisplay" style="font-size:10px; color:#aaa;">加载中...</div>
            <div id="myScoreDisplay" class="top-bar-score">🏆 0</div>
            <div class="turn-info">
                <div id="turnIndicator">等待中</div>
                <button id="endTurnBtn">结束</button>
            </div>
            <button id="resetBtn" style="background:#ef5350; color:white; border:none; padding:4px 8px; border-radius:4px; font-size:10px;">重置</button>
        </div>

        <!-- 主游戏区域 -->
        <div class="main-area">
            <!-- 顶部：传说(左) | 对手信息(中) | 稀有(右) -->
            <div class="legend-rare-row">
                <div class="legend-rare-col legend-col">
                    <div id="legendCardSlot" class="card-slot"></div>
                </div>
                <div class="legend-rare-col opp-col">
                    <div id="opponentsList" class="opp-list-vertical"></div>
                </div>
                <div class="legend-rare-col rare-col">
                    <div id="rareCardSlot" class="card-slot"></div>
                </div>
            </div>
            <!-- 市场(左) + 公共资源竖列(右) -->
            <div class="market-with-bank">
                <div class="market-area" id="marketArea"></div>
                <div class="bank-col-right">
                    <div class="token-container token-vertical" id="bankTokens"></div>
                    <button type="button" id="logBtn" class="log-btn">日志</button>
                    <div id="gameLog" class="log-panel"></div>
                </div>
            </div>
        </div>

        <!-- 玩家面板 -->
        <div class="player-dashboard">
            <div class="dashboard-stats-row" id="statsRow">
                <div class="stats-tokens" id="myTokensContainer"></div>
                <div class="stats-text">
                    <span id="myScoreStat">分数: 0</span>
                    <span id="myAbilityStatFire">🔥0</span>
                    <span id="myAbilityStatWater">💧0</span>
                    <span id="myAbilityStatElectric">⚡0</span>
                    <span id="myAbilityStatPsychic">💖0</span>
                    <span id="myAbilityStatDark">⚫0</span>
                </div>
            </div>
            <div class="dashboard-main">
                <div class="dashboard-sec">
                    <div class="sidebar-title">📦 保留区</div>
                    <div id="myHandContainer" class="stack-container"></div>
                </div>
                <div class="dashboard-sec">
                    <div class="sidebar-title">🏆 收藏图鉴</div>
                    <div id="myTableauContainer" class="stack-container"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 放大预览层 -->
    <div id="zoomOverlay"></div>

    <!-- 操作模态框 -->
    <div id="actionModal" class="modal">
        <div class="modal-content">
            <h3 id="modalCardName">卡牌</h3>
            <div id="modalButtons"></div>
            <button class="modal-btn cancel-btn">取消</button>
        </div>
    </div>

    <!-- 对手详情模态框 -->
    <div id="detailModal" class="modal">
        <div class="modal-content" style="width: 90%; max-width: 400px; max-height: 80vh; overflow-y: auto;">
            <h2 id="detailPlayerName" style="color:#42a5f5; margin-bottom: 10px;">对手详情</h2>
            <div id="detailContent"></div>
            <button class="modal-btn close-btn" style="background:#2c3e50;">关闭</button>
        </div>
    </div>

    <!-- JS模块 -->
    <script src="js/config.js"></script>
    <script src="js/data.js"></script>
    <script src="js/state.js"></script>
    <script src="js/network.js"></script>
    <script src="js/game.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/main.js"></script>
</body>
</html>